<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Open Graph Meta-->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Smart On-Grid Dashboard">
    <meta property="og:title" content="Smart On-Grid Dashboard">
    <title>Overview</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Main CSS-->
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <!-- Font-icon css-->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  </head>
  <body class="app sidebar-mini">
    <!-- Navbar-->
    <header class="app-header"><a class="app-header__logo" href="index.html">AERTC Admin</a>
      <!-- Sidebar toggle button--><a class="app-sidebar__toggle" href="#" data-toggle="sidebar" aria-label="Hide Sidebar"></a>
      <!-- Navbar Right Menu-->
      <h3 style="color: white; margin-top: 10px; margin-left: 300px;" id="demo"></h3>
      <ul class="app-nav">
        <li class="app-search">
          <input class="app-search__input" type="search" placeholder="Search">
          <button class="app-search__button"><i class="bi bi-search"></i></button>
        </li>
        
        <!-- User Menu-->
        <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown" aria-label="Open Profile Menu"><i class="bi bi-person fs-4"></i></a>
          <ul class="dropdown-menu settings-menu dropdown-menu-right">
            <li><a class="dropdown-item" href="page-user.html"><i class="bi bi-gear me-2 fs-5"></i> Settings</a></li>
            <li><a class="dropdown-item" href="page-user.html"><i class="bi bi-person me-2 fs-5"></i> Profile</a></li>
            <li><a class="dropdown-item" href="page-login.html"><i class="bi bi-box-arrow-right me-2 fs-5"></i> Logout</a></li>
          </ul>
        </li>
      </ul>
    </header>
    <!-- Sidebar menu-->
    <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
    <aside class="app-sidebar">

      <ul class="app-menu">
        <li><a class="app-menu__item" href="dashboard.html"><i class="app-menu__icon bi bi-speedometer"></i><span class="app-menu__label">Dashboard</span></a></li>
        <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon bi bi-laptop"></i><span class="app-menu__label">Devices</span><i class="treeview-indicator bi bi-chevron-right"></i></a>
          <ul class="treeview-menu">
            <li><a class="treeview-item" href="bootstrap-components.html"><i class="icon bi bi-circle-fill"></i> Inverters</a></li>
            <li><a class="treeview-item" href="https://icons.getbootstrap.com/" target="_blank" rel="noopener"><i class="icon bi bi-circle-fill"></i> Battteries</a></li>
            <li><a class="treeview-item" href="ui-cards.html"><i class="icon bi bi-circle-fill"></i> Supercapacitors</a></li>
            <li><a class="treeview-item" href="widgets.html"><i class="icon bi bi-circle-fill"></i> Control Boards</a></li>
          </ul>
        </li>
        <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon bi bi-ui-checks"></i><span class="app-menu__label">Network</span><i class="treeview-indicator bi bi-chevron-right"></i></a>
          <ul class="treeview-menu">
            <li><a class="treeview-item" href="form-components.html"><i class="icon bi bi-circle-fill"></i> Communication</a></li>
            <li><a class="treeview-item" href="form-samples.html"><i class="icon bi bi-circle-fill"></i> Protocol </a></li>
          </ul>
        </li>
        <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon bi bi-table"></i><span class="app-menu__label">Graphs</span><i class="treeview-indicator bi bi-chevron-right"></i></a>
          <ul class="treeview-menu">
            <li><a class="treeview-item" href="table-basic.html"><i class="icon bi bi-circle-fill"></i> Basic Tables</a></li>
            <li><a class="treeview-item" href="table-data-table.html"><i class="icon bi bi-circle-fill"></i> Data Tables</a></li>
          </ul>
        </li>
        <!-- <li class="treeview is-expanded"><a class="app-menu__item" href="#" data-toggle="treeview"><i class="app-menu__icon bi bi-file-earmark"></i><span class="app-menu__label">Pages</span><i class="treeview-indicator bi bi-chevron-right"></i></a>
          <ul class="treeview-menu">
            <li><a class="treeview-item active" href="blank-page.html"><i class="icon bi bi-circle-fill"></i> Blank Page</a></li>
            <li><a class="treeview-item" href="page-login.html"><i class="icon bi bi-circle-fill"></i> Login Page</a></li>
            <li><a class="treeview-item" href="page-lockscreen.html"><i class="icon bi bi-circle-fill"></i> Lockscreen Page</a></li>
            <li><a class="treeview-item" href="page-user.html"><i class="icon bi bi-circle-fill"></i> User Page</a></li>
            <li><a class="treeview-item" href="page-invoice.html"><i class="icon bi bi-circle-fill"></i> Invoice Page</a></li>
            <li><a class="treeview-item" href="page-mailbox.html"><i class="icon bi bi-circle-fill"></i> Mailbox</a></li>
            <li><a class="treeview-item" href="page-error.html"><i class="icon bi bi-circle-fill"></i> Error Page</a></li>
          </ul>
        </li> -->
        <!-- <li><a class="app-menu__item" href="docs.html"><i class="app-menu__icon bi bi-code-square"></i><span class="app-menu__label">Docs</span></a></li> -->
      </ul>
    </aside>
    <main class="app-content">
      <div class="app-title">
        <div style="display: flex; align-items: center; ">
          <img src="images/test.png" alt="Logo" style="height: 50px; width: 185px; margin-right: 10px;">
          <div style="display: flex; flex-direction: column; justify-content: center;">
            <span style="font-size: large; font-weight: bold;">Smart Micro-Grid Dashboard</span>
            <span style="font-size: small; color: gray;">Supervisor: Professor Solovyov</span>
          </div>
        </div>
          
        <ul class="app-breadcrumb breadcrumb">
          <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
          <li class="breadcrumb-item"><a href="#">Smart Grid Dashboard</a></li>
        </ul>
      </div>
      <div class="tile">
      <div class="container-fluid">
           
        <div class="row">
            <div class="powerbody">
              <div class="power-switch">
                <input type="checkbox" id="power-switch" onchange="sendPowerStatus()" />
                <div class="button">
                  <svg class="power-off">
                    <use xlink:href="#pline" class="pline" />
                    <use xlink:href="#circle" class="circle" />
                  </svg>
                  <svg class="power-on">
                    <use xlink:href="#pline" class="pline" />
                    <use xlink:href="#circle" class="circle" />
                  </svg>
                </div>
              </div>
            
            <!-- SVG -->
            <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
              <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 130 150" id="pline">
                <line x1="15" y1="15" x2="15" y2="30"/>
              </symbol>
              <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 240" id="circle">
                <circle cx="90" cy="55" r="35"/>
              </symbol>
            </svg>     
          </div>
          <div class="col-sm-1">
            <div class="supercap-container">
              <img src="images/supercaps.png">
          </div>
          </div>
          <div class="col-sm-1">
            <div id="flowLine" class="flow-line" style="margin-top: 200px; margin-left: 5px;" ></div>
          </div>
          <div class="col-sm-1">
            <div class="controlboard-container" style="margin-top: 175px; margin-left: 35px; ">
            <img src="images/Control-board.jpg" ></div>
          </div>
          <div class="col-sm-1">
          </div>          
          <div class="col-sm-4">
          <div id="home" style="width: 180px; height: 180px;  float: left; margin-left: 60px; margin-top: -60px;"></div>
          <div id="flowLine" class="flow-line" style="margin-top: 180px; margin-left: 120px; rotate: 90deg;" ></div>
        </div>
        <div class="col-sm-4" style="margin-left: -60px;" >
          <div class="tile">
            <h3 class="tile-title" style="margin-left: 25px;">Current status</h3>
            <table class="table table-hover" >
              <thead>
                <tr>
                  <th></th>
                  <th>Devices</th>
                  <th>Status</th>
                  <th>Power</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>Inverters</td>
                  <td>
                  <div class="status-led" id="status-led-4" style="margin-left: -20px; margin-top: 5px;"></div>
                  <div class="status-led" id="status-led-5" style="margin-left: 0px; margin-top: 5px;"></div>
                  <div class="status-led" id="status-led-6" style="margin-left: 20px; margin-top: 5px;"></div>
                  </td>
                  <td>--</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Grid</td>
                  <td>
                  <div class="status-led" id="status-led-8" style="margin-left: -20px; margin-top: 5px;"></div>  
                  </td>
                  <td>--</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>Batteries</td>
                  <td>
                  <div class="status-led" id="status-led-7" style="margin-left: -20px; margin-top: 5px;"></div>
                  <div class="status-led" id="status-led-9" style="margin-left: 0px; margin-top: 5px;"></div>
                  <div class="status-led" id="status-led-10" style="margin-left: 20px; margin-top: 5px;"></div>
                  <div class="status-led" id="status-led-11" style="margin-left: 40px; margin-top: 5px;"></div>
                  <div class="status-led" id="status-led-12" style="margin-left: 60px; margin-top: 5px;"></div>  
                  </td>
                  <td>--</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div> 
        </div>    
        <div class="row" >
          <div class="col-sm-1">
            <div class="battery-container">
              <div id="battery-1" style="transform: rotate(90deg);">
                <span class="battery-value" id="battery-value-1"></span>
              </div>
              <div id="battery-2" style="transform: rotate(90deg);">
                <span class="battery-value" id="battery-value-2"></span>
              </div>
              <div id="battery-3" style="transform: rotate(90deg);">
                <span class="battery-value" id="battery-value-3"></span>
              </div>
              <div id="battery-4" style="transform: rotate(90deg);">
                <span class="battery-value" id="battery-value-4"></span>
              </div>
              <div id="battery-5" style="transform: rotate(90deg);">
                <span class="battery-value" id="battery-value-5"></span>
              </div>
            </div>
          </div>
          <div class="col-sm-1">
            <div id="flowLine" class="flow-line" style="margin-top: 35px; margin-left: 60px;" ></div>
            <div id="flowLine" class="flow-line" style="margin-top: 75px; margin-left: 60px;" ></div>
            <div id="flowLine" class="flow-line" style="margin-top: 75px; margin-left: 60px;" ></div>
            <div id="flowLine" class="flow-line" style="margin-top: 75px; margin-left: 60px;" ></div>
            <div id="flowLine" class="flow-line" style="margin-top: 75px; margin-left: 60px;" ></div>
          </div>
          <div class="col-sm-1">
            <div class="controlboard-container" style="margin-top: 10px;">
              <img src="images/Control-board.jpg" ></div>
            <div class="controlboard-container" style="margin-top: 17px;">
              <img src="images/Control-board.jpg"></div>
            <div class="controlboard-container" style="margin-top: 20px;">
              <img src="images/Control-board.jpg" ></div>
            <div class="controlboard-container" style="margin-top: 20px;">
              <img src="images/Control-board.jpg"></div>
            <div class="controlboard-container" style="margin-top: 20px;">
              <img src="images/Control-board.jpg" ></div>
          </div>
          <div class="col-sm-1">
            <div id="flowLine" class="flow-line" style="margin-top: 160px; margin-left: 100px;" ></div>
          </div>
          <div class="col-sm-3">
            <div class="inverter-container">
              <div class="status-led" id="status-led-1"></div>
              <img src="images/Inverter.png"></div>
            <div class="inverter-container">
              <div class="status-led" id="status-led-2"></div>
              <img src="images/Inverter.png"></div>
            <div class="inverter-container">
              <div class="status-led" id="status-led-3"></div>
              <img src="images/Inverter.png"></div>
          </div>
         
          <div class="col-sm-1">
            <div id="flowLine" class="flow-line" style="margin-top: 160px;" ></div>
          </div>
          <div class="col-sm-3" >
            <div class="toglecontainer" style="margin-top: 130px; margin-right: 50px; ">
              <!-- <div class="buttoncenter"> -->
              <h7> Battery 1 </h7>
             <input type="checkbox" name="">
               <h7> Battery 2 </h7>
             <input type="checkbox" name=""> 
              <h7> Battery 3 </h7>
             <input type="checkbox" name="">
               <h7> Battery 4 </h7>
             <input type="checkbox" name=""> 
            <!-- </div>   -->
         </div>
            <div id="powerGrid" style="width: 150px; height: 150px;margin-top: -30px;"></div>
            <div class="line" style="margin-top: 10px;"></div>
            <div class="line"></div>
            <div class="video-container">
              <video width="200" height="140" autoplay loop muted>
                <source src="images/1014.mp4" type="video/mp4">
                Your browser does not support the video tag.
              </video>
             
            </div>
          </div>
        </div>
      
    </div>
  </div>
    </main>
    <!-- Essential javascripts for application to work-->
    <script src="js/jquery-3.7.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/animations.js"></script>
    <!-- Page specific javascripts-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.9.6/lottie.min.js"></script>
    <script>
    var i = 0;
    var j = 27;
    var txt = '"Website is under development"';
    var speed = 50;
    
    function typeWriter() {
      if (i < txt.length) {
        document.getElementById("demo").innerHTML += txt.charAt(i);
        i++;
        setTimeout(typeWriter, speed);
      }
    }   
    // Fetch and update the battery every 3 seconds
   setInterval(typeWriter, 1000);
    </script>
    <script>
      // Automatically trigger animation and background color change when the page loads
      window.onload = function () {
        startFlow();
   
      };

       function startFlow() {
        const flowLine = document.getElementById('flowLine');
        flowLine.classList.add('animated'); // Start animation
        };
</script>
<script>
// const powerStatus = 0; // 1 for on, 0 for off
function sendPowerStatus() {
    const powerSwitch = document.getElementById('power-switch');
    const powerStatus = powerSwitch.checked ? 1 : 0;
    console.log('Power button status:',powerStatus);
      updateLEDStatus(powerStatus);

    fetch('/update-radio', {
  method: 'POST',
  headers: {
    'Content-Type': 'text/plain',
  },
  body: powerStatus.toString() // Send as a plain text string
})
    .then(response => response.json())
    .then(data => {
      console.log('Response from server:', data);
    })
    .catch(error => {
      console.error('Error:', error);
    });
  }
</script>
<script>
   // Function to update LED status based on data
function updateLEDStatus(data) {
console.log('Updating LED status with data:', data);
let dataInt = Number(data);
console.log('Updating LED status with data int:', dataInt);
for (let i = 1; i <=7; i++) {
  const ledElement = [];
  ledElement[i] = document.getElementById(`status-led-${i}`);

  if (dataInt === 1) {
    ledElement[i].style.backgroundColor = '#4CBB17'; // Turn LED green if data is 1
  }  
  else {
    ledElement[i].style.backgroundColor = '#808080';  // Turn LED off (grey) if data is 0
  }
}
}
</script>
  </body>
</html>